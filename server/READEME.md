

### 양방향 연관관계
- DB 는 FK 를 가지고 연관관계를 맺음 (양방향)
- 객체에는 양방향 연관관계 라는 것이 없음 => 서로 다른 단방향 두개를 연관관계를 양방향처럼 보이게 하는 것
- 왜 양방향으로 연관관계를 맺을까??
  - 데이터베이스 테이블은 외래 키 하나로 두 테이블이 서로 조인  
  => 외래키 하나로 양방향 연관관계를 관리
  - 엔티티객체에서 단방향으로만 매핑하면??  
  => 참조를 한 엔티티에서만 사용히면, 다른 엔티티객체에서는 참조를 알 수없음(조회할 수 없음)
  - 연관관계를 관리하는 포인트가 각 엔티티에 존재(포인트가 2곳)
- 엔티티를 양방향 연관관계로 설정하면 객체의 참조는 둘인데 외래키는 하나..
- 연관관계 주인 설정한다 => 외래키 관리자를 선택(외래키가 있는 곳으로 )
- 연관관계 주인 : 외래키 수정, 삭제, 등록 
- 연관관계 주인 아닌 곳 : mappedBy 속성으로 주인 아님 설정, 외래키로 조회만

### 양방향 연관관계 주의
- 양쪽 엔티티에 관계 설정
- 연관관계 주인에는 값을 입력하지 않고, 주인 아닌 곳만 입력 => 외래키 값이 정상적으로 저장 되지 않음
- 객체 관점에서 양쪽 방향에 모두 값을 입력해 주자!!
- 둘 중 하나만 호출 하면 양방향이 깨질 수 있음 => 연관관계 편의 메소드 이용

### User : Room 연관관계 설정
- 연관관계 주인 : 외래키 관리하는 곳 
- User 가 등록 되면 Room 이 자동적으로 생성 되게 할 예정
- User id 값을 Room에서 외래키로 설정 > Room 이 연관관계 주인

- @OneToMany , @ManyToMany : 기본 페치 전략이 fetch = LAZY 로 설정 되어 있다.

### Entity 에서 Collection 초기화
- 컬렉션을 필드에서 바로 초기화한 이유 
  - 하이버네이트는 엔티티를 컬렉션을 한번 감싸서 하이버네이트가 제공하는 내장 컬렉션(class org.hibernate.collection.internal.PersistentBag)으로 변경 
  - new 초기화 하지 않고, 사용할 때 new (class java.util.ArrayList)를 하면 하이버네이트가 관리할 수 없음